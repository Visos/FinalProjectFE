<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../css/style.css">
<title>Project Academy</title>
</head>
<body style="background-color: #F6F1F1">
	<nav th:insert="~{fragments/header}"></nav>
	<nav class="navbar navbar-expand-lg bg-body-tertiary"
		sec:authorize="hasRole('AMMINISTRATORE')"
		th:insert="~{fragments/header-admin}"></nav>

	<nav class="navbar navbar-expand-lg bg-body-tertiary"
		sec:authorize="hasRole('CLIENTE')"
		th:insert="~{fragments/header-utente}"></nav>
	<div class="create-container">
		    <form th:action="@{/saveUser}" th:object="${utente}" method="post" class="create-box form-group">
			<div>
				<div class="mb-3">
					<label class="form-label">Nome</label> <input type="text"
						class="form-control" th:value="${utente.dati.nome}" disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">Cognome</label> <input type="text"
						th:value="${utente.dati.cognome}" disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">E-mail</label> <input type="text"
						th:value="${utente.dati.mail}" disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">Password</label> <input type="password"
						th:value="${utente.dati.password}" id="inputPassword" disabled>
				</div>
				<div class="mb-3 form-check">
					<input type="checkbox" class="form-check-input" id="exampleCheck1"
						onclick="showPassword()" disabled> <label
						class="form-check-label" for="exampleCheck1">Mostra
						password</label>
				</div>
			</div>

			<div class="inner-box" sec:authorize="hasRole('CLIENTE')">
				<div class="mb-3">
					<label class="form-label">Paese</label> <input type="text" th:value="${utente.dati.paese}" disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">Strada</label> <input type="text"th:value="${utente.dati.strada}"
						disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">Civico</label> <input type="text"th:value="${utente.dati.civico}"
						disabled>
				</div>
				<div class="mb-3">
					<label class="form-label">CAP</label> <input type="number"th:value="${utente.dati.cap}"
						min="10000" max="99999" disabled>
				</div>
			</div>

			<div class="buttonLogin" align="center">
				<button type="button" class="login-button"
					onclick="enableEditing(this)">Modifica</button>
			</div>
		</form>
	</div>

	<script>
function enableEditing(button) {
    const form = button.closest('form');
    const inputs = form.querySelectorAll('input');
    inputs.forEach(input => input.disabled = false);

    button.textContent = 'Salva';

    button.onclick = function() {
        form.submit();
    };
}
</script>

</body>
</html>
